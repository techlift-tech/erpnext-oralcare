{"version":3,"file":"erpnext_oralcare.js","sources":["../../../../apps/erpnext_oralcare/erpnext_oralcare/public/js/kanban_board_new.js"],"sourcesContent":["frappe.provide(\"frappe.views\");\n\n(function() {\n\n\tvar method_prefix = 'frappe.desk.doctype.kanban_board.kanban_board.';\n\n\tvar store = fluxify.createStore({\n\t\tid: 'store',\n\t\tinitialState: {\n\t\t\tdoctype: '',\n\t\t\tboard: {},\n\t\t\tcard_meta: {},\n\t\t\tcards: [],\n\t\t\tcolumns: [],\n\t\t\tfilters_modified: false,\n\t\t\tcur_list: {},\n\t\t\tempty_state: true\n\t\t},\n\t\tactionCallbacks: {\n\t\t\tinit: function(updater, opts) {\n\t\t\t\tupdater.set({\n\t\t\t\t\tempty_state: true\n\t\t\t\t});\n\n\t\t\t\tvar board = opts.board;\n\t\t\t\tvar card_meta = opts.card_meta;\n\t\t\t\topts.card_meta = card_meta;\n\t\t\t\topts.board = board;\n\t\t\t\tvar cards = opts.cards.map(function(card) {\n\t\t\t\t\treturn prepare_card(card, opts);\n\t\t\t\t});\n\t\t\t\tvar columns = prepare_columns(board.columns);\n\n\t\t\t\tupdater.set({\n\t\t\t\t\tdoctype: opts.doctype,\n\t\t\t\t\tboard: board,\n\t\t\t\t\tcard_meta: card_meta,\n\t\t\t\t\tcards: cards,\n\t\t\t\t\tcolumns: columns,\n\t\t\t\t\tcur_list: opts.cur_list,\n\t\t\t\t\tempty_state: false,\n\t\t\t\t\twrapper: opts.wrapper\n\t\t\t\t});\n\t\t\t},\n\t\t\tupdate_cards: function(updater, cards) {\n\t\t\t\tvar state = this;\n\t\t\t\tvar _cards = cards\n\t\t\t\t\t.map(card => prepare_card(card, state))\n\t\t\t\t\t.concat(this.cards)\n\t\t\t\t\t.uniqBy(card => card.name);\n\n\t\t\t\tupdater.set({\n\t\t\t\t\tcards: _cards\n\t\t\t\t});\n\t\t\t},\n\t\t\tadd_column: function(updater, col) {\n\t\t\t\tif(frappe.model.can_create('Custom Field')) {\n\t\t\t\t\tfluxify.doAction('update_column', col, 'add');\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.msgprint({\n\t\t\t\t\t\ttitle: __('Not permitted'),\n\t\t\t\t\t\tmessage: __('You are not allowed to create columns'),\n\t\t\t\t\t\tindicator: 'red'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tarchive_column: function(updater, col) {\n\t\t\t\tfluxify.doAction('update_column', col, 'archive');\n\t\t\t},\n\t\t\trestore_column: function(updater, col) {\n\t\t\t\tfluxify.doAction('update_column', col, 'restore');\n\t\t\t},\n\t\t\tupdate_column: function(updater, col, action) {\n\t\t\t\tvar doctype = this.doctype;\n\t\t\t\tvar board = this.board;\n\t\t\t\tfetch_customization(doctype)\n\t\t\t\t\t.then(function(doc) {\n\t\t\t\t\t\treturn modify_column_field_in_c11n(doc, board, col.title, action);\n\t\t\t\t\t})\n\t\t\t\t\t.then(save_customization)\n\t\t\t\t\t.then(function() {\n\t\t\t\t\t\treturn update_kanban_board(board.name, col.title, action);\n\t\t\t\t\t}).then(function(r) {\n\t\t\t\t\t\tvar cols = r.message;\n\t\t\t\t\t\tupdater.set({\n\t\t\t\t\t\t\tcolumns: prepare_columns(cols)\n\t\t\t\t\t\t});\n\t\t\t\t\t}, function(err) {\n\t\t\t\t\t\tconsole.error(err); // eslint-disable-line\n\t\t\t\t\t});\n\t\t\t},\n\t\t\tadd_card: function(updater, card_title, column_title) {\n\t\t\t\tvar doc = frappe.model.get_new_doc(this.doctype);\n\t\t\t\tvar field = this.card_meta.title_field;\n\t\t\t\tvar quick_entry = this.card_meta.quick_entry;\n\t\t\t\tvar state = this;\n\n\t\t\t\tvar doc_fields = {};\n\t\t\t\tdoc_fields[field.fieldname] = card_title;\n\t\t\t\tdoc_fields[this.board.field_name] = column_title;\n\t\t\t\tthis.cur_list.filter_area.get().forEach(function(f) {\n\t\t\t\t\tif (f[2] !== \"=\") return;\n\t\t\t\t\tdoc_fields[f[1]] = f[3];\n\t\t\t\t});\n\n\t\t\t\t$.extend(doc, doc_fields);\n\n\t\t\t\t// add the card directly\n\t\t\t\t// for better ux\n\t\t\t\tconst card = prepare_card(doc, state);\n\t\t\t\tcard._disable_click = true;\n\t\t\t\tconst cards = [...state.cards, card];\n\t\t\t\t// remember the name which we will override later\n\t\t\t\tconst old_name = doc.name;\n\t\t\t\tupdater.set({ cards });\n\n\t\t\t\tif (field && !quick_entry) {\n\t\t\t\t\treturn insert_doc(doc)\n\t\t\t\t\t\t.then(function(r) {\n\t\t\t\t\t\t\t// update the card in place with the updated doc\n\t\t\t\t\t\t\tconst updated_doc = r.message;\n\t\t\t\t\t\t\tconst index = state.cards.findIndex(card => card.name === old_name);\n\t\t\t\t\t\t\tconst card = prepare_card(updated_doc, state);\n\t\t\t\t\t\t\tconst new_cards = state.cards.slice();\n\t\t\t\t\t\t\tnew_cards[index] = card;\n\t\t\t\t\t\t\tupdater.set({ cards: new_cards });\n\t\t\t\t\t\t\tfluxify.doAction('update_order');\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.new_doc(this.doctype, doc);\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate_card: function(updater, card) {\n\t\t\t\tvar index = -1;\n\t\t\t\tthis.cards.forEach(function(c, i) {\n\t\t\t\t\tif (c.name === card.name) {\n\t\t\t\t\t\tindex = i;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tvar cards = this.cards.slice();\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tcards.splice(index, 1, card);\n\t\t\t\t}\n\t\t\t\tupdater.set({ cards: cards });\n\t\t\t},\n\t\t\tupdate_doc: function(updater, doc, card) {\n\t\t\t\tvar state = this;\n\t\t\t\treturn frappe.call({\n\t\t\t\t\tmethod: method_prefix + \"update_doc\",\n\t\t\t\t\targs: { doc: doc },\n\t\t\t\t\tfreeze: true\n\t\t\t\t}).then(function(r) {\n\t\t\t\t\tvar updated_doc = r.message;\n\t\t\t\t\tvar updated_card = prepare_card(card, state, updated_doc);\n\t\t\t\t\tfluxify.doAction('update_card', updated_card);\n\t\t\t\t});\n\t\t\t},\n\t\t\tupdate_order: function(updater) {\n\t\t\t\t// cache original order\n\t\t\t\tconst _cards = this.cards.slice();\n\t\t\t\tconst _columns = this.columns.slice();\n\n\t\t\t\tconst order = {};\n\t\t\t\tthis.wrapper.find('.kanban-column[data-column-value]')\n\t\t\t\t\t.each(function() {\n\t\t\t\t\t\tvar col_name = $(this).data().columnValue;\n\t\t\t\t\t\torder[col_name] = [];\n\t\t\t\t\t\t$(this).find('.kanban-card-wrapper').each(function() {\n\t\t\t\t\t\t\tvar card_name = $(this).data().name;\n\t\t\t\t\t\t\torder[col_name].push(card_name);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: method_prefix + \"update_order\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tboard_name: this.board.name,\n\t\t\t\t\t\torder: order\n\t\t\t\t\t},\n\t\t\t\t\tcallback: (r) => {\n\t\t\t\t\t\tvar board = r.message[0];\n\t\t\t\t\t\tvar updated_cards = r.message[1];\n\t\t\t\t\t\tvar cards = update_cards_column(updated_cards);\n\t\t\t\t\t\tvar columns = prepare_columns(board.columns);\n\t\t\t\t\t\tupdater.set({\n\t\t\t\t\t\t\tcards: cards,\n\t\t\t\t\t\t\tcolumns: columns\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}).fail(function() {\n\t\t\t\t\t// revert original order\n\t\t\t\t\tupdater.set({\n\t\t\t\t\t\tcards: _cards,\n\t\t\t\t\t\tcolumns: _columns\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tupdate_column_order: function(updater, order) {\n\t\t\t\treturn frappe.call({\n\t\t\t\t\tmethod: method_prefix + \"update_column_order\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tboard_name: this.board.name,\n\t\t\t\t\t\torder: order\n\t\t\t\t\t}\n\t\t\t\t}).then(function(r) {\n\t\t\t\t\tvar board = r.message;\n\t\t\t\t\tvar columns = prepare_columns(board.columns);\n\t\t\t\t\tupdater.set({\n\t\t\t\t\t\tcolumns: columns\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tset_indicator: function(updater, column, color) {\n\t\t\t\treturn frappe.call({\n\t\t\t\t\tmethod: method_prefix + \"set_indicator\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tboard_name: this.board.name,\n\t\t\t\t\t\tcolumn_name: column.title,\n\t\t\t\t\t\tindicator: color\n\t\t\t\t\t}\n\t\t\t\t}).then(function(r) {\n\t\t\t\t\tvar board = r.message;\n\t\t\t\t\tvar columns = prepare_columns(board.columns);\n\t\t\t\t\tupdater.set({\n\t\t\t\t\t\tcolumns: columns\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tfrappe.views.KanbanBoard = function(opts) {\n\n\t\tvar self = {};\n\t\tself.wrapper = opts.wrapper;\n\t\tself.cur_list = opts.cur_list;\n\t\tself.board_name = opts.board_name;\n\n\t\tself.update = function(cards) {\n\t\t\t// update cards internally\n\t\t\topts.cards = cards;\n\n\t\t\tif(self.wrapper.find('.kanban').length > 0 && self.cur_list.start !== 0) {\n\t\t\t\tfluxify.doAction('update_cards', cards);\n\t\t\t} else {\n\t\t\t\tinit();\n\t\t\t}\n\t\t};\n\n\t\tfunction init() {\n\t\t\tfluxify.doAction('init', opts);\n\t\t\tstore.on('change:columns', make_columns);\n\t\t\tprepare();\n\t\t\tstore.on('change:cur_list', setup_restore_columns);\n\t\t\tstore.on('change:columns', setup_restore_columns);\n\t\t\tstore.on('change:empty_state', show_empty_state);\n\t\t}\n\n\t\tfunction prepare() {\n\t\t\tself.$kanban_board = self.wrapper.find('.kanban');\n\n\t\t\tif(self.$kanban_board.length === 0) {\n\t\t\t\tself.$kanban_board = $(frappe.render_template(\"kanban_board\"));\n\t\t\t\tself.$kanban_board.appendTo(self.wrapper);\n\t\t\t}\n\n\t\t\tself.$filter_area = self.cur_list.$page.find('.active-tag-filters');\n\t\t\tbind_events();\n\t\t\tsetup_sortable();\n\t\t}\n\n\t\tfunction make_columns() {\n\t\t\tself.$kanban_board.find(\".kanban-column\").not(\".add-new-column\").remove();\n\t\t\tvar columns = store.getState().columns;\n\n\t\t\tcolumns.filter(is_active_column).map(function(col) {\n\t\t\t\tfrappe.views.KanbanBoardColumn(col, self.$kanban_board);\n\t\t\t});\n\t\t}\n\n\t\tfunction bind_events() {\n\t\t\tbind_add_column();\n\t\t}\n\n\t\tfunction setup_sortable() {\n\t\t\tvar sortable = new Sortable(self.$kanban_board.get(0), {\n\t\t\t\tgroup: 'columns',\n\t\t\t\tanimation: 150,\n\t\t\t\tdataIdAttr: 'data-column-value',\n\t\t\t\tfilter: '.add-new-column',\n\t\t\t\thandle: '.kanban-column-title',\n\t\t\t\tonEnd: function() {\n\t\t\t\t\tvar order = sortable.toArray();\n\t\t\t\t\torder = order.slice(1);\n\t\t\t\t\tfluxify.doAction('update_column_order', order);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction bind_add_column() {\n\n\t\t\tvar $add_new_column = self.$kanban_board.find(\".add-new-column\"),\n\t\t\t\t$compose_column = $add_new_column.find(\".compose-column\"),\n\t\t\t\t$compose_column_form = $add_new_column.find(\".compose-column-form\").hide();\n\n\t\t\t$compose_column.on('click', function() {\n\t\t\t\t$(this).hide();\n\t\t\t\t$compose_column_form.show();\n\t\t\t\t$compose_column_form.find('input').focus();\n\t\t\t});\n\n\t\t\t//save on enter\n\t\t\t$compose_column_form.keydown(function(e) {\n\t\t\t\tif (e.which == 13) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif (!frappe.request.ajax_count) {\n\t\t\t\t\t\t// not already working -- double entry\n\t\t\t\t\t\tvar title = $compose_column_form.serializeArray()[0].value;\n\t\t\t\t\t\tvar col = {\n\t\t\t\t\t\t\ttitle: title.trim()\n\t\t\t\t\t\t};\n\t\t\t\t\t\tfluxify.doAction('add_column', col);\n\t\t\t\t\t\t$compose_column_form.find('input').val('');\n\t\t\t\t\t\t$compose_column.show();\n\t\t\t\t\t\t$compose_column_form.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// on form blur\n\t\t\t$compose_column_form.find('input').on(\"blur\", function() {\n\t\t\t\t$(this).val('');\n\t\t\t\t$compose_column.show();\n\t\t\t\t$compose_column_form.hide();\n\t\t\t});\n\t\t}\n\n\t\tfunction setup_restore_columns() {\n\t\t\tvar cur_list = store.getState().cur_list;\n\t\t\tvar columns = store.getState().columns;\n\t\t\tvar list_row_right = cur_list.$page\n\t\t\t\t.find(`[data-list-renderer='Kanban'] .list-row-right`)\n\t\t\t\t.css('margin-right', '15px');\n\t\t\tlist_row_right.empty();\n\n\t\t\tvar archived_columns = columns.filter(function(col) {\n\t\t\t\treturn col.status === 'Archived';\n\t\t\t});\n\n\t\t\tif (!archived_columns.length) return;\n\n\t\t\tvar options = archived_columns.reduce(function(a, b) {\n\t\t\t\treturn a + \"<li><a class='option'>\" +\n\t\t\t\t\t\"<span class='ellipsis' style='max-width: 100px; display: inline-block'>\" +\n\t\t\t\t\t__(b.title) + \"</span>\" +\n\t\t\t\t\t\"<button style='float:right;' data-column='\" + b.title +\n\t\t\t\t\t\"' class='btn btn-default btn-xs restore-column text-muted'>\"\n\t\t\t\t\t+ __('Restore') + \"</button></a></li>\";\n\t\t\t}, \"\");\n\t\t\tvar $dropdown = $(\"<div class='dropdown pull-right'>\" +\n\t\t\t\t\"<a class='text-muted dropdown-toggle' data-toggle='dropdown'>\" +\n\t\t\t\t\"<span class='dropdown-text'>\" + __('Archived Columns') + \"</span><i class='caret'></i></a>\" +\n\t\t\t\t\"<ul class='dropdown-menu'>\" + options + \"</ul>\" +\n\t\t\t\t\"</div>\");\n\n\t\t\tlist_row_right.html($dropdown);\n\n\t\t\t$dropdown.find(\".dropdown-menu\").on(\"click\", \"button.restore-column\", function() {\n\t\t\t\tvar column_title = $(this).data().column;\n\t\t\t\tvar col = {\n\t\t\t\t\ttitle: column_title,\n\t\t\t\t\tstatus: 'Archived'\n\t\t\t\t};\n\t\t\t\tfluxify.doAction('restore_column', col);\n\t\t\t});\n\t\t}\n\n\t\tfunction show_empty_state() {\n\t\t\tvar empty_state = store.getState().empty_state;\n\n\t\t\tif(empty_state) {\n\t\t\t\tself.$kanban_board.find('.kanban-column').hide();\n\t\t\t\tself.$kanban_board.find('.kanban-empty-state').show();\n\t\t\t} else {\n\t\t\t\tself.$kanban_board.find('.kanban-column').show();\n\t\t\t\tself.$kanban_board.find('.kanban-empty-state').hide();\n\t\t\t}\n\t\t}\n\n\t\tinit();\n\n\t\treturn self;\n\t};\n\n\tfrappe.views.KanbanBoardColumn = function(column, wrapper) {\n\t\tvar self = {};\n\t\tvar filtered_cards = [];\n\n\t\tfunction init() {\n\t\t\tmake_dom();\n\t\t\tsetup_sortable();\n\t\t\tmake_cards();\n\t\t\tstore.on('change:cards', make_cards);\n\t\t\tbind_add_card();\n\t\t\tbind_options();\n\t\t}\n\n\t\tfunction make_dom() {\n\t\t\tself.$kanban_column = $(frappe.render_template(\n\t\t\t\t'kanban_column', {\n\t\t\t\t\ttitle: column.title,\n\t\t\t\t\tdoctype: store.getState().doctype,\n\t\t\t\t\tindicator: column.indicator\n\t\t\t\t})).appendTo(wrapper);\n\t\t\tself.$kanban_cards = self.$kanban_column.find('.kanban-cards');\n\t\t}\n\n\t\tfunction make_cards() {\n\t\t\tself.$kanban_cards.empty();\n\t\t\tvar cards = store.getState().cards;\n\t\t\tfiltered_cards = get_cards_for_column(cards, column);\n\t\t\tvar filtered_cards_names = filtered_cards.map(card => card.name);\n\n\t\t\tvar order = column.order;\n\t\t\tif(order) {\n\t\t\t\torder = JSON.parse(order);\n\t\t\t\torder.forEach(function(name) {\n\t\t\t\t\tif (!filtered_cards_names.includes(name)) return;\n\t\t\t\t\tfrappe.views.KanbanBoardCard(get_card(name), self.$kanban_cards);\n\t\t\t\t});\n\t\t\t\t// new cards\n\t\t\t\tfiltered_cards.forEach(function(card) {\n\t\t\t\t\tif(order.indexOf(card.name) === -1) {\n\t\t\t\t\t\tfrappe.views.KanbanBoardCard(card, self.$kanban_cards);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tfiltered_cards.map(function(card) {\n\t\t\t\t\tfrappe.views.KanbanBoardCard(card, self.$kanban_cards);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction setup_sortable() {\n\t\t\tSortable.create(self.$kanban_cards.get(0), {\n\t\t\t\tgroup: \"cards\",\n\t\t\t\tanimation: 150,\n\t\t\t\tdataIdAttr: 'data-name',\n\t\t\t\tonStart: function() {\n\t\t\t\t\twrapper.find('.kanban-card.add-card').fadeOut(200, function() {\n\t\t\t\t\t\twrapper.find('.kanban-cards').height('100vh');\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tonEnd: function() {\n\t\t\t\t\twrapper.find('.kanban-card.add-card').fadeIn(100);\n\t\t\t\t\twrapper.find('.kanban-cards').height('auto');\n\t\t\t\t\t// update order\n\t\t\t\t\tfluxify.doAction('update_order');\n\t\t\t\t},\n\t\t\t\tonAdd: function() {\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tfunction bind_add_card() {\n\t\t\tvar $wrapper = self.$kanban_column;\n\t\t\tvar $btn_add = $wrapper.find('.add-card');\n\t\t\tvar $new_card_area = $wrapper.find('.new-card-area');\n\t\t\tvar $textarea = $new_card_area.find('textarea');\n\n\t\t\t//Add card button\n\t\t\t$new_card_area.hide();\n\t\t\t$btn_add.on('click', function() {\n\t\t\t\t$btn_add.hide();\n\t\t\t\t$new_card_area.show();\n\t\t\t\t$textarea.focus();\n\t\t\t});\n\n\t\t\t//save on enter\n\t\t\t$new_card_area.keydown(function(e) {\n\t\t\t\tif (e.which == 13) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif (!frappe.request.ajax_count) {\n\t\t\t\t\t\t// not already working -- double entry\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tvar card_title = $textarea.val();\n\t\t\t\t\t\t$new_card_area.hide();\n\t\t\t\t\t\t$textarea.val('');\n\t\t\t\t\t\tfluxify.doAction('add_card', card_title, column.title)\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t$btn_add.show();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// on textarea blur\n\t\t\t$textarea.on(\"blur\", function() {\n\t\t\t\t$(this).val('');\n\t\t\t\t$btn_add.show();\n\t\t\t\t$new_card_area.hide();\n\t\t\t});\n\t\t}\n\n\t\tfunction bind_options() {\n\t\t\tself.$kanban_column.find(\".column-options .dropdown-menu\")\n\t\t\t\t.on(\"click\", \"[data-action]\", function() {\n\t\t\t\t\tvar $btn = $(this);\n\t\t\t\t\tvar action = $btn.data().action;\n\n\t\t\t\t\tif (action === \"archive\") {\n\t\t\t\t\t\tfluxify.doAction('archive_column', column);\n\t\t\t\t\t} else if (action === \"indicator\") {\n\t\t\t\t\t\tvar color = $btn.data().indicator;\n\t\t\t\t\t\tfluxify.doAction('set_indicator', column, color);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tget_column_indicators(function(indicators) {\n\t\t\t\tvar html = '<li class=\"button-group\">';\n\t\t\t\thtml += indicators.reduce(function(prev, curr) {\n\t\t\t\t\treturn prev + '<div \\\n\t\t\t\t\t\tdata-action=\"indicator\" data-indicator=\"'+curr+'\"\\\n\t\t\t\t\t\tclass=\"btn btn-default btn-xs indicator ' + curr + '\"></div>';\n\t\t\t\t}, \"\");\n\t\t\t\thtml += '</li>';\n\t\t\t\tself.$kanban_column.find(\".column-options .dropdown-menu\")\n\t\t\t\t\t.append(html);\n\t\t\t});\n\t\t}\n\n\t\tinit();\n\t};\n\n\tfrappe.views.KanbanBoardCard = function(card, wrapper) {\n\t\tvar self = {};\n\n\t\tfunction init() {\n\t\t\tif(!card) return;\n\t\t\tmake_dom();\n\t\t\trender_card_meta();\n\t\t\tbind_edit_card();\n\t\t\t// edit_card_title();\n\t\t}\n\n\t\tfunction make_dom() {\n\t\t\tvar opts = {\n\t\t\t\tname: card.name,\n\t\t\t\ttitle: remove_img_tags(card.title),\n\t\t\t\tfields_string: card.card_properties_display,\n\t\t\t\tdisable_click: card._disable_click ? 'disable-click' : ''\n\t\t\t};\n\t\t\tself.$card = $(frappe.render_template('kanban_card_new', opts))\n\t\t\t\t.appendTo(wrapper);\n\t\t}\n\n\t\tfunction render_card_meta() {\n\t\t\tvar html = \"\";\n\t\t\tif (card.comment_count > 0)\n\t\t\t\thtml += '<span class=\"list-comment-count small text-muted \">' +\n\t\t\t\t\t'<i class=\"octicon octicon-comment\"></i> ' + card.comment_count +\n\t\t\t\t\t'</span>';\n\t\t\thtml += get_assignees_html();\n\n\t\t\tif (card.color && frappe.ui.color.validate_hex(card.color)) {\n\t\t\t\tconst $div = $('<div>');\n\t\t\t\t$('<div></div>').css({\n\t\t\t\t\twidth: '20px',\n\t\t\t\t\theight: '5px',\n\t\t\t\t\tborderRadius: '2px',\n\t\t\t\t\tmarginBottom: '4px',\n\t\t\t\t\tbackgroundColor: card.color\n\t\t\t\t}).appendTo($div);\n\n\t\t\t\tself.$card.find('.kanban-card.content').prepend($div);\n\t\t\t}\n\n\t\t\tself.$card.find(\".kanban-card-meta\").empty().append(html);\n\t\t}\n\n\t\tfunction bind_edit_card() {\n\t\t\tself.$card.find('.kanban-card.content').on('click', function() {\n\t\t\t\tfrappe.set_route('Form', card.doctype, card.name);\n\t\t\t\t// setup_edit_card();\n\t\t\t});\n\t\t}\n\n\t\tfunction refresh_dialog() {\n\t\t\tset_dialog_fields();\n\t\t\tmake_assignees();\n\t\t}\n\n\t\tfunction set_dialog_fields() {\n\t\t\tself.edit_dialog.fields.forEach(function(df) {\n\t\t\t\tvar value = card.doc[df.fieldname];\n\t\t\t\tif (value) {\n\t\t\t\t\tself.edit_dialog.set_value(df.fieldname, value);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction make_assignees() {\n\t\t\tvar d = self.edit_dialog;\n\t\t\tvar html = get_assignees_html() + '<a class=\"add-assignment avatar avatar-small avatar-empty\">\\\n\t\t\t\t<i class=\"octicon octicon-plus text-muted\" style=\"margin: 3px 0 0 5px;\"></i></a>';\n\n\t\t\td.$wrapper.find(\"[data-fieldname='assignees'] .control-input-wrapper\").empty().append(html);\n\t\t\td.$wrapper.find(\".add-assignment\").on(\"click\", function() {\n\t\t\t\tif (self.assign_to_dialog) {\n\t\t\t\t\tself.assign_to_dialog.show();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tshow_assign_to_dialog();\n\t\t\t});\n\t\t}\n\n\t\tfunction get_assignees_html() {\n\t\t\treturn card.assigned_list.reduce(function(a, b) {\n\t\t\t\treturn a + frappe.avatar(b);\n\t\t\t}, \"\");\n\t\t}\n\n\t\tfunction show_assign_to_dialog() {\n\t\t\tself.assign_to = new frappe.ui.form.AssignToDialog({\n\t\t\t\tobj: self,\n\t\t\t\tmethod: 'frappe.desk.form.assign_to.add',\n\t\t\t\tdoctype: card.doctype,\n\t\t\t\tdocname: card.name,\n\t\t\t\tcallback: function() {\n\t\t\t\t\tvar user = self.assign_to_dialog.get_values().assign_to;\n\t\t\t\t\tcard.assigned_list.push(user);\n\t\t\t\t\tfluxify.doAction('update_card', card);\n\t\t\t\t\trefresh_dialog();\n\t\t\t\t}\n\t\t\t});\n\t\t\tself.assign_to_dialog = self.assign_to.dialog;\n\t\t\tself.assign_to_dialog.show();\n\t\t}\n\n\t\tinit();\n\t};\n\n\tfunction prepare_card(card, state, doc) {\n\t\tvar assigned_list = card._assign ?\n\t\t\tJSON.parse(card._assign) : [];\n\t\tvar comment_count = card._comment_count || 0;\n\n\t\tif (doc) {\n\t\t\tcard = Object.assign({}, card, doc);\n\t\t}\n\t\t\n\t\tvar card_properties_display = []\n\n\t\tfor(var field of state.board.fields_to_show) {\n\t\t\tvar field_name = field.field\n\t\t\tvar field_title = field.field_title\n\t\t\tif(field_name && field_title && card[field_name]) {\n\t\t\t\tcard_properties_display.push(field_title + \": \" + card[field_name])\n\t\t\t}\n\t\t}\n\n\t\tvar column = '';\n\t\tif(state.board.board_based_on == 'Select') {\n\t\t\tcolumn = card[state.board.field_name]\t\n\t\t} else if(state.board.board_based_on == 'Date') {\n\t\t\tvar field_date = card[state.board.field_name]\t\n\t\t\tvar date_diff = frappe.datetime.get_day_diff(field_date, frappe.datetime.get_today())\n\t\t\t\n\t\t\tif(date_diff == 0) {\n\t\t\t\tcolumn = 'Today'\n\t\t\t} else if(date_diff == 1) {\n\t\t\t\tcolumn = 'Tomorrow'\n\t\t\t} else if(date_diff == 2) {\n\t\t\t\tcolumn = 'Day After Tomorrow'\n\t\t\t} else {\n\t\t\t\tcolumn = 'Other'\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tdoctype: state.doctype,\n\t\t\tname: card.name,\n\t\t\ttitle: card[state.card_meta.title_field.fieldname],\n\t\t\tcolumn: column,\n\t\t\tcard_properties_display: card_properties_display,\n\t\t\tassigned_list: card.assigned_list || assigned_list,\n\t\t\tcomment_count: card.comment_count || comment_count,\n\t\t\tcolor: card.color || null,\n\t\t\tdoc: doc\n\t\t};\n\t}\n\n\tfunction prepare_columns(columns) {\n\t\treturn columns.map(function(col) {\n\t\t\treturn {\n\t\t\t\ttitle: col.column_name,\n\t\t\t\tstatus: col.status,\n\t\t\t\torder: col.order,\n\t\t\t\tindicator: col.indicator || 'darkgrey'\n\t\t\t};\n\t\t});\n\t}\n\n\tfunction modify_column_field_in_c11n(doc, board, title, action) {\n\t\tdoc.fields.forEach(function(df) {\n\t\t\tif (df.fieldname === board.field_name && df.fieldtype === \"Select\") {\n\t\t\t\tif(!df.options) df.options = \"\";\n\n\t\t\t\tif (action === \"add\") {\n\t\t\t\t\t//add column_name to Select field's option field\n\t\t\t\t\tif(!df.options.includes(title))\n\t\t\t\t\t\tdf.options += \"\\n\" + title;\n\t\t\t\t} else if (action === \"delete\") {\n\t\t\t\t\tvar options = df.options.split(\"\\n\");\n\t\t\t\t\tvar index = options.indexOf(title);\n\t\t\t\t\tif (index !== -1) options.splice(index, 1);\n\t\t\t\t\tdf.options = options.join(\"\\n\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn doc;\n\t}\n\n\tfunction fetch_customization(doctype) {\n\t\treturn new Promise(function(resolve) {\n\t\t\tfrappe.model.with_doc(\"Customize Form\", \"Customize Form\", function() {\n\t\t\t\tvar doc = frappe.get_doc(\"Customize Form\");\n\t\t\t\tdoc.doc_type = doctype;\n\t\t\t\tfrappe.call({\n\t\t\t\t\tdoc: doc,\n\t\t\t\t\tmethod: \"fetch_to_customize\",\n\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\tresolve(r.docs[0]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tfunction save_customization(doc) {\n\t\tif (!doc) return;\n\t\tdoc.hide_success = true;\n\t\treturn frappe.call({\n\t\t\tdoc: doc,\n\t\t\tmethod: \"save_customization\"\n\t\t});\n\t}\n\n\tfunction insert_doc(doc) {\n\t\treturn frappe.call({\n\t\t\tmethod: \"frappe.client.insert\",\n\t\t\targs: {\n\t\t\t\tdoc: doc\n\t\t\t},\n\t\t\tcallback: function() {\n\t\t\t\tfrappe.model.clear_doc(doc.doctype, doc.name);\n\t\t\t\tfrappe.show_alert({ message: __(\"Saved\"), indicator: 'green' }, 1);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction update_kanban_board(board_name, column_title, action) {\n\t\tvar method;\n\t\tvar args = {\n\t\t\tboard_name: board_name,\n\t\t\tcolumn_title: column_title\n\t\t};\n\t\tif (action === 'add') {\n\t\t\tmethod = 'add_column';\n\t\t} else if (action === 'archive' || action === 'restore') {\n\t\t\tmethod = 'archive_restore_column';\n\t\t\targs.status = action === 'archive' ? 'Archived' : 'Active';\n\t\t}\n\t\treturn frappe.call({\n\t\t\tmethod: method_prefix + method,\n\t\t\targs: args\n\t\t});\n\t}\n\n\tfunction is_filters_modified(board, cur_list) {\n\t\treturn new Promise(function(resolve) {\n\t\t\tsetTimeout(function() {\n\t\t\t\ttry {\n\t\t\t\t\tvar list_filters = JSON.stringify(cur_list.filter_area.get());\n\t\t\t\t\tresolve(list_filters !== board.filters);\n\t\t\t\t} catch(e) {\n\t\t\t\t\t// sometimes the filter_list is not initiated\n\t\t\t\t\tresolve(false);\n\t\t\t\t}\n\n\t\t\t}, 2000);\n\t\t});\n\t}\n\n\tfunction is_active_column(col) {\n\t\treturn col.status !== 'Archived';\n\t}\n\n\tfunction get_cards_for_column(cards, column) {\n\t\treturn cards.filter(function(card) {\n\t\t\treturn card.column === column.title;\n\t\t});\n\t}\n\n\tfunction get_card(name) {\n\t\treturn store.getState().cards.find(function(c) {\n\t\t\treturn c.name === name;\n\t\t});\n\t}\n\n\tfunction update_cards_column(updated_cards) {\n\t\tvar cards = store.getState().cards;\n\t\tcards.forEach(function(c) {\n\t\t\tupdated_cards.forEach(function(uc) {\n\t\t\t\tif(uc.name === c.name) {\n\t\t\t\t\tc.column = uc.column;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn cards;\n\t}\n\n\tfunction get_column_indicators(callback) {\n\t\tfrappe.model.with_doctype('Kanban Board Column', function() {\n\t\t\tvar meta = frappe.get_meta('Kanban Board Column');\n\t\t\tvar indicators;\n\t\t\tmeta.fields.forEach(function(df) {\n\t\t\t\tif(df.fieldname==='indicator') {\n\t\t\t\t\tindicators = df.options.split(\"\\n\");\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(!indicators) {\n\t\t\t\t//\n\t\t\t\tindicators = ['green', 'blue', 'orange', 'grey'];\n\t\t\t}\n\t\t\tcallback(indicators);\n\t\t});\n\t}\n\n\tfunction isBound(el, event, fn) {\n\t\tvar events = $._data(el[0], 'events');\n\t\tif(!events) return false;\n\t\tvar handlers = events[event];\n\t\tvar flag = false;\n\t\thandlers.forEach(function(h) {\n\t\t\tif(h.handler.name === fn.name)\n\t\t\t\tflag = true;\n\t\t});\n\t\treturn flag;\n\t}\n\n\tfunction remove_img_tags(html) {\n\t\tconst $temp = $(`<div>${html}</div>`);\n\t\t$temp.find('img').remove();\n\t\treturn $temp.html();\n\t}\n})();\n"],"names":["const"],"mappings":"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"}